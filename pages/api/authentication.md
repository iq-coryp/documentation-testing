---
title:  Authentication
permalink: /api/authentication/
tags: []
keywords: 
audience: 
last_updated: 
summary: 
---

{% include linkrefs.html %}

## Endpoints

* Sandbox: https://accountsdemo.iqmetrix.net/v1
* Production: https://accounts.iqmetrix.net/v1

## Authentication 

iQmetrix APIs are protected by <b><a href="/api/glossary.html#OAuth" data-toggle="tooltip" data-original-title="{{site.data.glossary.O-Auth}}">OAuth2</a></b>.

In order to make authorized requests to iQmetrix APIs, your application must first obtain an Access Token.

## Obtaining an Access Token

{{note}}

Each time the endpoint is called, a <b>new</b> access token is created and returned

{{end}}

### Request

    POST /auth2/token

    grant_type={GrantType}&
    username={Username}&
    password={Password}&
    client_id={ClientId}&
    client_secret={ClientSecret}

### Headers

* Content-Type: `application/x-www-form-urlencoded`

#### Request Parameters

*  `GrantType` (Required) - The value must be `password`
*  `Username` (Required) - The username provided to iQmetrix, usually an email address
*  `Password` (Required) - The password, provided when an account is created
*  `ClientId` (Required) The client ID powered by iQmetrix
*  `ClientSecret` (Required) - The client secret

###### Example

    POST /oauth2/token
    Content-Type: application/x-www-form-urlencoded

    grant_type=password&
    username=email@example.com&
    password=examplepassword&
    client_id=exampleclient&
    client_secret=examplesecret

### Response

* `access_token` - The access token issued by the authorization server
* `expires_in` - Seconds remaining until the access token expires, **12 hours** or less if revoked
* `refresh_token` - The refresh token generated by the authorization server, expires after **7 days**

###### Example

    HTTP 200
    Content-Type: application/json
    {
        "access_token": "3dae10c05e894011b5b3ae15972ffbf4",
        "expires_in": 43199,
        "refresh_token": "f8bk56n40f7gi34j49g7bh4n430gf874h" 
    }

### Errors

The below table may help resolve problems encountered when making requests to the Authentication API.

| Error Code | Message | How to Resolve |
|:-----------|:--------|:---------------|
| HTTP 400 | `unsupported_grant_type` | Ensure grant_type is set to `password` |
| HTTP 400 | `invalid_client` | Ensure client_id and client_secret are correct |
| HTTP 400 | `invalid_grant` | Ensure username and password are correct |
 
## Refresh Token 

Instead of always using credentials, a client application may use the refresh token to obtain a new access token.

{{note}}

The client credentials must be the same as those used in the request to acquire the provided refresh token.

{{end}}

{{note}}
Once a refresh token has been exchanged, the access token it was provided with is revoked
{{end}}

### Request

    POST /auth2/token

    grant_type={GrantType}&
    client_id={ClientId}&
    client_secret={ClientSecret}&
    refresh_token={RefreshToken}


### Headers

* Content-Type: `application/x-www-form-urlencoded`

#### Request Parameters

* `GrantType` (Required) - The value must be `refresh_token`
* `ClientId` (Required) The client ID powered by iQmetrix
* `ClientSecret` (Required) - The client secret, should not be shared
* `RefreshToken` (Required) - The refresh token we are exchanging 

###### Example

    POST /oauth2/token 
    Content-Type: application/x-www-form-urlencoded
    grant_type=refresh_token& 
    client_id=exampleclient& 
    client_secret=examplesecret& 
    refresh_token=f8bk56n40f7gi34j49g7bh4n430gf874h

### Response

* `access_token` - The access token issued by the authorization server
* `expires_in` - Seconds remaining until the access token expires, default is **12 hours**
* `refresh_token` - Another refresh token generated by the authorization server, expires after **7 days**

###### Example

    HTTP 200 Content-Type: application/json 
    { 
        "access_token": "3dae10c05e894011b5b3ae15972ffbf4", 
        "expires_in": 43199, 
        "refresh_token": "clbv67g93j5b5040g74o30458fjdfm4df78" 
    }

## Errors

The below table may help resolve problems encountered when making requests to the Authentication API.

| Error Code | Message | How to Resolve |
|:-----------|:--------|:---------------|
| HTTP 400 | `unsupported_grant_type` | Ensure grant_type is set to `refresh_token` |
| HTTP 400 | `invalid_client` | Ensure client_id and client_secret are correct |
| HTTP 400 | `invalid_grant` | Ensure client credentials are the same as those used in the original request to acquire the provided refresh token |
